{
  "service": "netflix",
  "flow": "cancel",
  "version": 3,
  "last_validated": null,
  "notes": "Cancel flow must handle retention offers. Agent clicks through all of them. STARTING POINT, adjust after real testing.",
  "steps": [
    {
      "step": 1,
      "action": "navigate",
      "url": "https://www.netflix.com/login",
      "expected_title_contains": "Netflix"
    },
    {
      "step": 2,
      "action": "wait",
      "wait_after_sec": [2, 5]
    },
    {
      "step": 3,
      "action": "type_text",
      "target_description": "Email or phone input field",
      "value": "{email}"
    },
    {
      "step": 4,
      "action": "type_text",
      "target_description": "Password input field",
      "value": "{pass}"
    },
    {
      "step": 5,
      "action": "wait",
      "wait_after_sec": [0.5, 1.5]
    },
    {
      "step": 6,
      "action": "click",
      "target_description": "Sign In button",
      "checkpoint": true,
      "checkpoint_prompt": "Am I logged into Netflix? Do I see profiles or the main browse page?"
    },
    {
      "step": 7,
      "action": "wait",
      "wait_after_sec": [3, 6]
    },
    {
      "step": 8,
      "action": "navigate",
      "url": "https://www.netflix.com/cancelplan"
    },
    {
      "step": 9,
      "action": "wait",
      "wait_after_sec": [2, 4]
    },
    {
      "step": 10,
      "action": "handle_retention",
      "target_description": "Click 'Continue Cancellation' or 'Cancel Membership', ignore all retention offers",
      "checkpoint": true,
      "checkpoint_prompt": "Is this a cancellation confirmation page or a retention offer? If retention offer, I need to find and click the cancel/continue button.",
      "may_repeat": true,
      "max_repeats": 5
    },
    {
      "step": 11,
      "action": "wait",
      "wait_after_sec": [2, 4]
    },
    {
      "step": 12,
      "action": "click",
      "target_description": "Final 'Finish Cancellation' or 'Complete Cancellation' button",
      "checkpoint": true,
      "checkpoint_prompt": "Is the cancellation confirmed? Do I see a message like 'Your cancellation will take effect at the end of your billing period'?"
    },
    {
      "step": 13,
      "action": "wait",
      "wait_after_sec": [3, 6]
    },
    {
      "step": 14,
      "action": "verify_success",
      "target_description": "Cancellation confirmation message showing end date",
      "checkpoint": true,
      "checkpoint_prompt": "Has the cancellation been confirmed? Do I see a message confirming the account will be cancelled at the end of the billing period?"
    }
  ]
}
