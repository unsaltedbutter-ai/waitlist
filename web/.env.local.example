# ==================================================
# web/.env.local.example
# Copy to web/.env.local and fill in values
# ==================================================

# PostgreSQL on LAN Linux box
DATABASE_URL=postgresql://butter:YOUR_PASSWORD@192.168.1.XXX:5432/unsaltedbutter

# JWT signing secret (generate: openssl rand -hex 32)
JWT_SECRET=CHANGE_ME_GENERATE_A_RANDOM_64_CHAR_HEX_STRING

# Path to AES-256 encryption key file (32 bytes, binary)
# Generate: openssl rand 32 > /path/to/encryption.keyfile && chmod 400 /path/to/encryption.keyfile
ENCRYPTION_KEY_PATH=/etc/unsaltedbutter/encryption.keyfile

# BTCPay Server
BTCPAY_URL=https://pay.unsaltedbutter.ai
BTCPAY_API_KEY=YOUR_BTCPAY_API_KEY
BTCPAY_STORE_ID=YOUR_BTCPAY_STORE_ID
BTCPAY_WEBHOOK_SECRET=YOUR_WEBHOOK_SECRET

# Agent HMAC secret (shared secret for orchestrator/agent to authenticate)
# Generate: openssl rand -hex 32
AGENT_HMAC_SECRET=CHANGE_ME_GENERATE_A_RANDOM_64_CHAR_HEX_STRING

# Cron secret (Bearer token for /api/cron/daily endpoint)
# Generate: openssl rand -hex 32
CRON_SECRET=CHANGE_ME_GENERATE_A_RANDOM_64_CHAR_HEX_STRING

# VPS Nostr push identity (for sending NIP-17 DMs to orchestrator)
# Not needed for local dev unless testing push notifications
# Path to file containing nsec or hex private key
VPS_NOSTR_PRIVKEY_FILE=/home/butter/.unsaltedbutter/nostr-vps.privkey

# Orchestrator's npub (set when orchestrator is built)
ORCHESTRATOR_NPUB=

# ---- Abuse prevention thresholds (all optional, sensible defaults apply) ----
# CREDENTIAL_STRIKE_LIMIT=3         # Block after N consecutive credential failures
# CREDENTIAL_COOLDOWN_SECS=3600     # Cooldown (seconds) after 2+ failures
# ONDEMAND_RATE_LIMIT=5             # Max on-demand jobs per user per window
# ONDEMAND_RATE_WINDOW_SECS=3600    # Rate window (seconds)
# USER_ABANDON_LIMIT=3              # Cooldown after N consecutive abandons
# USER_ABANDON_COOLDOWN_SECS=86400  # Abandon cooldown (seconds)
# CREDENTIAL_ALERT_THRESHOLD=3      # Operator alert after N failures

# App
NEXT_PUBLIC_APP_URL=https://unsaltedbutter.ai
NODE_ENV=production

# Operator dashboard access (set to your user UUID after first login)
# Only this user can access /operator and /api/operator/* endpoints
OPERATOR_USER_ID=
